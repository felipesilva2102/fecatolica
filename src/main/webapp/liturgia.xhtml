<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>ðŸ“– Liturgia do Dia - FS Tech</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/primeicons/12.1.0/primeicons.min.css"/>
        <style>
            .liturgia-panel {
                width: 95%;
                max-width: 1000px;
                margin: auto;
                margin-top: 20px;
            }
            .section-title {
                font-weight: bold;
                margin-top: 10px;
                margin-bottom: 5px;
            }
            .top-controls {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            @media screen and (max-width: 768px) {
                .ui-panel-titlebar {
                    font-size: 1.1em;
                }
                .section-title {
                    font-size: 1em;
                }
                .top-controls {
                    flex-direction: column;
                    gap: 10px;
                }
            }
        </style>
    </h:head>
    <h:body>

        <h:form id="liturgiaForm">

            <p:panel id="liturgiaPanelWrapper" header="ðŸ“– Liturgia do Dia" styleClass="liturgia-panel">

                <!-- Top controls: Calendar e botÃ£o voltar -->
                <div class="top-controls">
                    <p:calendar id="dataPicker" value="#{liturgiaBean.dataSelecionada}" pattern="dd/MM/yyyy" 
                                navigator="true" showButtonPanel="true">
                        <p:ajax event="dateSelect" listener="#{liturgiaBean.carregarLiturgiaPorData(liturgiaBean.dataSelecionada)}" update="liturgiaPanelWrapper"/>
                    </p:calendar>

                    <p:button value="ðŸ”™ Voltar para o TerÃ§o" outcome="/santo_terco.xhtml" icon="pi pi-arrow-left"/>
                </div>

                <!-- Dados principais -->
                <p:panelGrid id="liturgiaPanel" columns="2" columnClasses="label,value" style="width:100%; margin-bottom:20px;">
                    <h:outputText value="Data:" />
                    <h:outputText value="#{liturgiaBean.liturgia.data}" />

                    <h:outputText value="Liturgia:" />
                    <h:outputText value="#{liturgiaBean.liturgia.liturgia}" />

                    <h:outputText value="Cor LitÃºrgica:" />
                    <h:outputText value="#{liturgiaBean.liturgia.cor}" />
                </p:panelGrid>

                <!-- Accordion para seÃ§Ãµes -->
                <p:accordionPanel multiple="true" style="width:100%">

                    <!-- OraÃ§Ãµes -->
                    <p:tab title="OraÃ§Ãµes">
                        <p:panelGrid columns="1" style="width:100%">
                            <h:outputText value="Coleta:" styleClass="section-title"/>
                            <h:outputText value="#{liturgiaBean.liturgia.oracoes.coleta}" escape="false" />

                            <h:outputText value="Oferendas:" styleClass="section-title"/>
                            <h:outputText value="#{liturgiaBean.liturgia.oracoes.oferendas}" escape="false" />

                            <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                            <h:outputText value="#{liturgiaBean.liturgia.oracoes.comunhao}" escape="false" />
                        </p:panelGrid>
                    </p:tab>

                    <!-- Leituras -->
                    <p:tab title="Leituras">
                        <p:panelGrid columns="1" style="width:100%">
                            <h:outputText value="Primeira Leitura:" styleClass="section-title"/>
                            <ui:repeat value="#{liturgiaBean.liturgia.leituras.primeiraLeitura}" var="leitura">
                                <p:panel style="margin-bottom:10px;">
                                    <h:outputText value="#{leitura.titulo} (#{leitura.referencia})" style="font-weight:bold;"/>
                                    <h:outputText value="#{leitura.texto}" escape="false"/>
                                </p:panel>
                            </ui:repeat>

                            <h:outputText value="Salmo:" styleClass="section-title"/>
                            <ui:repeat value="#{liturgiaBean.liturgia.leituras.salmo}" var="salmo">
                                <p:panel style="margin-bottom:10px;">
                                    <h:outputText value="#{salmo.referencia}" style="font-weight:bold;"/>
                                    <h:outputText value="#{salmo.refrao}" style="font-style:italic;"/><br/>
                                    <h:outputText value="#{salmo.texto}" escape="false"/>
                                </p:panel>
                            </ui:repeat>

                            <h:outputText value="Evangelho:" styleClass="section-title"/>
                            <ui:repeat value="#{liturgiaBean.liturgia.leituras.evangelho}" var="evangelho">
                                <p:panel style="margin-bottom:10px;">
                                    <h:outputText value="#{evangelho.titulo} (#{evangelho.referencia})" style="font-weight:bold;"/>
                                    <h:outputText value="#{evangelho.texto}" escape="false"/>
                                </p:panel>
                            </ui:repeat>
                        </p:panelGrid>
                    </p:tab>

                    <!-- AntÃ­fonas -->
                    <p:tab title="AntÃ­fonas">
                        <p:panelGrid columns="1" style="width:100%">
                            <h:outputText value="Entrada:" styleClass="section-title"/>
                            <h:outputText value="#{liturgiaBean.liturgia.antifonas.entrada}" escape="false"/>

                            <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                            <h:outputText value="#{liturgiaBean.liturgia.antifonas.comunhao}" escape="false"/>
                        </p:panelGrid>
                    </p:tab>

                </p:accordionPanel>
            </p:panel>
            <footer id="footer" style="text-align:center; padding:20px; background:#f9f9f9;">

                <!-- BotÃµes de contato -->
                <div style="margin:16px 0;">
                    <!-- WhatsApp -->
                    <a href="https://wa.me/5584999937274?text=Ol%C3%A1,%20gostaria%20de%20saber%20mais"
                       target="_blank"
                       style="background:#25D366;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;margin:4px;display:inline-block;">
                        ðŸ’¬ WhatsApp
                    </a>

                    <!-- Email -->
                    <a href="mailto:felipefrancelino2015@gmail.com?subject=Contato&amp;body=OlÃ¡!"
                       onclick="window.open('https://mail.google.com/mail/?view=cm&amp;fs=1&amp;to=felipefrancelino2015@gmail.com&amp;su=Contato&amp;body=OlÃ¡!', '_blank'); return false;"
                       style="background:#39588f;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;margin:4px;display:inline-block;">
                        ðŸ“§ Email
                    </a>
                </div>

                <!-- Texto -->
                <p style="font-size:.88rem; color:#444; margin:8px 0;">
                    Este rodapÃ© pode conter informaÃ§Ãµes de contato, links Ãºteis, reflexÃµes espirituais e avisos importantes.
                </p>

                <!-- Desenvolvedor -->
                <div style="margin-top:10px; color:#bbb; font-size:0.9rem;">
                    Desenvolvido por <strong>FS Tech</strong>
                </div>

                <!-- Contato final -->
                <div style="margin-top:8px;">
                    <i class="pi pi-whatsapp" style="color:#25D366;"></i>
                    <a href="https://wa.me/5584999937274?text=Ol%C3%A1,%20gostaria%20de%20saber%20mais%20sobre%20seu%20trabalho."
                       target="_blank"
                       style="text-decoration:none; color:#25D366; margin-left:5px; font-weight:bold;">
                        +55 (84) 99993-7274
                    </a>
                </div>
            </footer>
        </h:form>
    </h:body>
</html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="jakarta.faces.facelets">

    <h:head>
        <title>Liturgia do Dia</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>
            .container {
                width: 100%;
                max-width: 900px;
                margin: auto;
                padding: 10px;
            }

            .titulo {
                font-size: 22px;
                font-weight: bold;
                margin: 15px 0;
                text-align: center;
            }

            /* Ajustes mobile */
            @media (max-width: 600px) {
                .titulo {
                    font-size: 18px;
                }
                .ui-panelgrid .ui-grid-col-6 {
                    width: 100% !important;
                    display: block;
                }
            }
        </style>
    </h:head>

    <h:body>
        <h:form id="formLiturgia">
            <p:panel id="liturgiaPanelWrapper" styleClass="liturgia-panel">
                <div class="container">

                    <div class="titulo">ðŸ“– Liturgia do Dia</div>

                    <!-- InformaÃ§Ãµes principais -->
                    <p:panel header="InformaÃ§Ãµes" style="margin-bottom:15px;">
                        <div class="top-controls" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; text-align: center;">
                            <!-- CalendÃ¡rio com largura mÃ¡xima, mas encolhe em telas menores -->
                            <p:calendar id="dataPicker" value="#{liturgiaBean.dataSelecionada}" pattern="dd/MM/yyyy" 
                                        navigator="true" showButtonPanel="true" style="flex: 1 1 100px; max-width: 200px;">
                                <p:ajax event="dateSelect" 
                                        listener="#{liturgiaBean.carregarLiturgiaPorData(liturgiaBean.dataSelecionada)}" 
                                        update="liturgiaPanelWrapper"/>
                            </p:calendar>

                            <!-- BotÃ£o sempre Ã  direita -->
                            <p:button value="ðŸ”™ Voltar para o TerÃ§o" outcome="/santo_terco.xhtml" style="white-space: nowrap;"/>
                        </div>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" style="width:100%;">
                            <h:outputText value="Data:" />
                            <h:outputText value="#{liturgiaBean.liturgia.data}" />

                            <h:outputText value="Liturgia:" />
                            <h:outputText value="#{liturgiaBean.liturgia.liturgia}" />

                            <h:outputText value="Cor LitÃºrgica:" />
                            <h:outputText value="#{liturgiaBean.liturgia.cor}" />
                        </p:panelGrid>
                    </p:panel>

                    <!-- SeÃ§Ãµes com accordion -->
                    <p:accordionPanel multiple="true" style="margin-bottom:15px;">

                        <!-- OraÃ§Ãµes -->
                        <p:tab title="OraÃ§Ãµes">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Coleta:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.coleta}" escape="false" />

                                <h:outputText value="Oferendas:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.oferendas}" escape="false" />

                                <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.comunhao}" escape="false" />
                            </p:panelGrid>
                        </p:tab>

                        <!-- Leituras -->
                        <p:tab title="Leituras">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Primeira Leitura:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.primeiraLeitura}" var="leitura">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{leitura.titulo} (#{leitura.referencia})" style="font-weight:bold;"/>
                                        <h:outputText value="#{leitura.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>

                                <h:outputText value="Salmo:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.salmo}" var="salmo">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{salmo.referencia}" style="font-weight:bold;"/>
                                        <h:outputText value="#{salmo.refrao}" style="font-style:italic;"/><br/>
                                        <h:outputText value="#{salmo.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>

                                <h:outputText value="Evangelho:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.evangelho}" var="evangelho">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{evangelho.titulo} (#{evangelho.referencia})" style="font-weight:bold;"/>
                                        <h:outputText value="#{evangelho.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>
                            </p:panelGrid>
                        </p:tab>

                        <!-- AntÃ­fonas -->
                        <p:tab title="AntÃ­fonas">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Entrada:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.antifonas.entrada}" escape="false"/>

                                <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.antifonas.comunhao}" escape="false"/>
                            </p:panelGrid>
                        </p:tab>

                    </p:accordionPanel>
                </div>
                <footer id="footer" style="text-align:center; padding:20px; background:#f9f9f9;">

                    <!-- BotÃµes de contato -->
                    <div style="margin:16px 0;">
                        <!-- WhatsApp -->
                        <a href="https://wa.me/5584999937274?text=Ol%C3%A1,%20gostaria%20de%20saber%20mais"
                           target="_blank"
                           style="background:#25D366;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;margin:4px;display:inline-block;">
                            ðŸ’¬ WhatsApp
                        </a>

                        <!-- Email -->
                        <a href="mailto:felipefrancelino2015@gmail.com?subject=Contato&amp;body=OlÃ¡!"
                           onclick="window.open('https://mail.google.com/mail/?view=cm&amp;fs=1&amp;to=felipefrancelino2015@gmail.com&amp;su=Contato&amp;body=OlÃ¡!', '_blank'); return false;"
                           style="background:#39588f;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;margin:4px;display:inline-block;">
                            ðŸ“§ Email
                        </a>
                    </div>

                    <!-- Desenvolvedor -->
                    <div style="margin-top:10px; color:#bbb; font-size:0.9rem;">
                        Desenvolvido por <strong>FS Tech</strong>
                    </div>

                    <!-- Contato final -->
                    <div style="margin-top:8px;">
                        <i class="pi pi-whatsapp" style="color:#25D366;"></i>
                        <a href="https://wa.me/5584999937274?text=Ol%C3%A1,%20gostaria%20de%20saber%20mais%20sobre%20seu%20trabalho."
                           target="_blank"
                           style="text-decoration:none; color:#25D366; margin-left:5px; font-weight:bold;">
                            +55 (84) 99993-7274
                        </a>
                    </div>
                </footer>
            </p:panel>
        </h:form>
    </h:body>
</html>

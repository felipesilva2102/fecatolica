<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="jakarta.faces.facelets">

    <h:head>
        <title>Liturgia do Dia</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>
            body {
                font-family:"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
                background:linear-gradient(180deg,#f7fbff 0%,#f0f6fb 50%,#eef7f1 100%);
                margin:0;
                padding:0;
            }

            .container{
                max-width:1100px;
                margin:24px auto;
                padding:18px;
            }

            .card{
                background:white;
                border-radius:12px;
                box-shadow:0 8px 30px rgba(20,40,80,0.08);
                padding:18px;
                margin-bottom:20px;
            }

            header h1{
                margin:0 0 6px 0;
                font-size:1.6rem;
                text-align:center;
                color: #8b0000;
            }

            .top-controls {
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
                gap: 10px;
                margin-bottom: 15px;
            }

            .section-title {
                font-weight:bold;
                margin-top:12px;
                color: #1a4f89;
            }

            @media (max-width: 920px){
                .container{
                    padding:12px;
                }
            }
        </style>
    </h:head>

    <h:body>
        <h:form id="formLiturgia">
            <div class="container">
                <!-- Menu padronizado -->
                <ui:include src="/includes/menu.xhtml"/>

                <!-- TÃ­tulo -->
                <div class="card">
                    <header style="text-align:center;">
                        <h1>ðŸ“– Liturgia do Dia</h1>
                    </header>
                </div>


                <!-- CalendÃ¡rio e informaÃ§Ãµes bÃ¡sicas -->
                <div class="card top-controls">
                    <p:calendar id="dataPicker"
                                value="#{liturgiaBean.dataSelecionada}"
                                pattern="dd/MM/yyyy"
                                navigator="true"
                                showButtonPanel="true"
                                style="flex: 1 1 120px; max-width:200px;">
                        <p:ajax event="dateSelect"
                                listener="#{liturgiaBean.carregarLiturgiaPorData(liturgiaBean.dataSelecionada)}"
                                update="gridLiturgia accordionLiturgia"/>
                    </p:calendar>
                </div>

                <!-- InformaÃ§Ãµes principais -->
                <div class="card">
                    <p:panelGrid id="gridLiturgia" columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" style="width:100%;">
                        <h:outputText value="Data:" />
                        <h:outputText value="#{liturgiaBean.liturgia.data}" />

                        <h:outputText value="Liturgia:" />
                        <h:outputText value="#{liturgiaBean.liturgia.liturgia}" />

                        <h:outputText value="Cor LitÃºrgica:" />
                        <h:outputText value="#{liturgiaBean.liturgia.cor}" />
                    </p:panelGrid>
                </div>

                <!-- Accordion com seÃ§Ãµes -->
                <div class="card">
                    <p:accordionPanel id="accordionLiturgia" multiple="true">
                        <!-- OraÃ§Ãµes -->
                        <p:tab title="OraÃ§Ãµes">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Coleta:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.coleta}" escape="false" />

                                <h:outputText value="Oferendas:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.oferendas}" escape="false" />

                                <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.oracoes.comunhao}" escape="false" />
                            </p:panelGrid>
                        </p:tab>

                        <!-- Leituras -->
                        <p:tab title="Leituras">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Primeira Leitura:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.primeiraLeitura}" var="leitura">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{leitura.titulo} (#{leitura.referencia})" style="font-weight:bold;"/>
                                        <h:outputText value="#{leitura.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>

                                <h:outputText value="Salmo:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.salmo}" var="salmo">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{salmo.referencia}" style="font-weight:bold;"/>
                                        <h:outputText value="#{salmo.refrao}" style="font-style:italic;"/><br/>
                                        <h:outputText value="#{salmo.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>

                                <h:outputText value="Evangelho:" styleClass="section-title"/>
                                <ui:repeat value="#{liturgiaBean.liturgia.leituras.evangelho}" var="evangelho">
                                    <p:panel style="margin-bottom:10px;">
                                        <h:outputText value="#{evangelho.titulo} (#{evangelho.referencia})" style="font-weight:bold;"/>
                                        <h:outputText value="#{evangelho.texto}" escape="false"/>
                                    </p:panel>
                                </ui:repeat>
                            </p:panelGrid>
                        </p:tab>

                        <!-- AntÃ­fonas -->
                        <p:tab title="AntÃ­fonas">
                            <p:panelGrid columns="1" style="width:100%">
                                <h:outputText value="Entrada:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.antifonas.entrada}" escape="false"/>

                                <h:outputText value="ComunhÃ£o:" styleClass="section-title"/>
                                <h:outputText value="#{liturgiaBean.liturgia.antifonas.comunhao}" escape="false"/>
                            </p:panelGrid>
                        </p:tab>
                    </p:accordionPanel>
                </div>
                <ui:include src="/includes/footer.xhtml"/>
            </div>
        </h:form>
    </h:body>
</html>
